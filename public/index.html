<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
  		<script src="https://www.gstatic.com/firebasejs/3.6.3/firebase.js"></script>
        <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <script src="https://use.fontawesome.com/b0971f36c4.js"></script>
        <link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="index.css">
		
        <title>Edubots</title>
	</head>
    
	<body>
        <div id="leftSide">
            <section id="headerLeft">
                <h1>Edubots</h1>
                <div id="tabs">
                    <ul>
                        <li><a href="#Inbox">Inbox</a></li>
                        <li><a href="#Answered">Answered</a></li>
                        <li><a href="#BotTraining">Bot Training</a></li>
                    </ul>
                    <p class="newest">Newest first <i class="fa fa-angle-down fa-lg"></i></p>
                    <div class="contentLeft">
                        <div id="Inbox">
                            <div class="boxLeft">
                                <div class="boxImg">
                                <img src="http://placehold.it/40x40">
                                </div>
                                <div class="contentBoxLeft"><span>
                                    <h3 id="user1">Firebase web App</h3>
                                    <p id="userQuestion1">Content</p>
                                    </span>
                                </div>
                            </div>
                            <div class="boxLeft">
                                <div class="boxImg">
                                <img src="http://placehold.it/40x40">
                                </div>
                                <div class="contentBoxLeft">
                                    <h3 id="user2">Title</h3>
                                    <p id="userQuestion2">Bot answer</p>
                                </div>
                            </div>
                            <div class="boxLeft">
                                <div class="boxImg">
                                <img src="http://placehold.it/40x40">
                                </div>
                                <div class="contentBoxLeft">
                                    <h3 id="user3">Svar</h3>
                                    <p id="userQuestion3">Søker...</p>
                                </div>
                            </div>
                        </div>
                        <div id="Answered">
                            <div class="boxLeft">

                            </div>
                        </div>
                        <div id="BotTraining">
                            <div class="boxLeft">

                            </div>
                        </div>
                    </div>
                </div>

            </section>
        </div>

        <div id="rightSide">
            <section id="messages">
                <div class="boxRight">
                    <div class="boxImg">
                        <img src="http://placehold.it/40x40">
                        </div>
                    <div class="contentBoxRight">
                        <h3 id="studentName" class="textLeft">Firebase web App</h3>
                        <p id="studentQuestion" class="textLeft">Content</p>
                    </div>
                </div>


                <div class="boxRight">
                    <div class="boxImg">
                        <img src="http://placehold.it/40x40">
                    </div>
                    <div class="contentBoxRight">
                        <h3 id="botName" class="textLeft">Title</h3>
                        <p id="botAnswer" class="textLeft">Bot answer</p>
                    </div>
                </div>

                <div class="boxRight">
                    <div class="boxImg">
                        <img src="http://placehold.it/40x40">
                    </div>
                    <div class="contentBoxRight">
                        <h3 id="answerToStudent" class="textLeft">Svar</h3>
                        <p id="showAnswer" class="textLeft">Søker...</p>
                    </div>
                </div>
            </section>

            <p class="writeAnswer"> Write an answer</p>
            <textarea id="mainText" placeholder="Say something useful..."></textarea>
            <button id="submitBtn" onclick="submitClick()">Send</button>
        </div>

        <script>
            $( function() {
                $( "#tabs" ).tabs();
            } );
        </script>
        
        <script>
            $(function(){
                $(".boxLeft").click(function(){
                    $(this).addClass("boxLeftSelected").siblings().removeClass("boxLeftSelected");
                });
            });
        </script>

<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyD9crO-z5GJgxIgBy-IEr9mcFiC5d6I4zk",
    authDomain: "differ-bot-hosting.firebaseapp.com",
    databaseURL: "https://differ-bot-hosting.firebaseio.com",
    storageBucket: "differ-bot-hosting.appspot.com",
    messagingSenderId: "161733476770"
  };

  firebase.initializeApp(config);
</script>
        
<script type="text/javascript">
	var mainText = document.getElementById("mainText");
	var submitBtn = document.getElementById("submitBtn");
	var studentName = document.getElementById("studentName");
	var studentQuestion = document.getElementById("studentQuestion");
	var botAnswer = document.getElementById("botAnswer");
	var botName = document.getElementById("botName");
	var showAnswer = document.getElementById("showAnswer");
	var answerToStudent = document.getElementById("answerToStudent");
	var user1 = document.getElementById("user1");
	var user2 = document.getElementById("user2");
	var user3 = document.getElementById("user3");
	var userQuestion1 = document.getElementById("userQuestion1");
	var userQuestion2 = document.getElementById("userQuestion2");
	var userQuestion3 = document.getElementById("userQuestion3");

			// Henter ut teksten fra "Heading:" fra databasen. 
	var user1Ref = firebase.database().ref().child("Student").child("Student1").child("Name");
		user1Ref.on('value', function(datasnapshot) {
			user1.innerText = datasnapshot.val();
		});

		// Henter ut meldinger fra child "Melding" "1".
	var userQuestion1Ref = firebase.database().ref().child("Student").child("Student1").child("Message");	
		userQuestion1Ref.on('value', function(datasnapshot) {
			userQuestion1.innerText = datasnapshot.val();
		});
			// Henter ut teksten fra "Heading:" fra databasen. 
	var user2Ref = firebase.database().ref().child("Student").child("Student2").child("Name");
		user2Ref.on('value', function(datasnapshot) {
			user2.innerText = datasnapshot.val();
		});

		// Henter ut meldinger fra child "Melding" "1".
	var userQuestion2Ref = firebase.database().ref().child("Student").child("Student2").child("Message");
		userQuestion2Ref.on('value', function(datasnapshot) {
			userQuestion2.innerText = datasnapshot.val();
		});
				// Henter ut teksten fra "Heading:" fra databasen. 
	var user3Ref = firebase.database().ref().child("Student").child("Student3").child("Name");
		user3Ref.on('value', function(datasnapshot) {
			user3.innerText = datasnapshot.val();
		});

		// Henter ut meldinger fra child "Melding" "1".
	var userQuestion3Ref = firebase.database().ref().child("Student").child("Student3").child("Message");	
		userQuestion3Ref.on('value', function(datasnapshot) {
			userQuestion3.innerText = datasnapshot.val();
		});


	var studentNameRef = firebase.database().ref().child("Names").child("1");
		studentNameRef.on('value', function(datasnapshot) {
			studentName.innerText = datasnapshot.val();
		});

		// Henter ut meldinger fra child "Melding" "1".
	var studentQuestionRef = firebase.database().ref().child("Melding").child("1");	
		studentQuestionRef.on('value', function(datasnapshot) {
			studentQuestion.innerText = datasnapshot.val();
		});
		// Henter navnet til botten fra databasen
	var botNameRef = firebase.database().ref().child("Bots").child("BotName");
		botNameRef.on('value', function(datasnapshot) {
			botName.innerText = datasnapshot.val();
		});
		// Henter botens svar fra databasen
	var botAnswerRef = firebase.database().ref().child("Bots").child("BotAnswer");
		botAnswerRef.on('value', function(datasnapshot) {
			botAnswer.innerText = datasnapshot.val();
		});
	var answerToStudentRef = firebase.database().ref().child("AnswerToStudent").child("Student").child("AnswerDanny");
		answerToStudentRef.on('value', function(datasnapshot) {
			answerToStudent.innerText = datasnapshot.val();
		});
		
		// Skal egentlig hente value ut fra "Answer". Som foreleser svarer på. 
	var showAnswerRef = firebase.database().ref().child("SvarTilStudent");
   		 showAnswerRef.on('value', function(datasnapshot) {
            var data = datasnapshot.exportVal();
            for(var child in data){
                showAnswer.innerText = data[child];
            }
        });



	// Sender inn teksten i textarea til firebase databasen når "Send" knappen blir trykket på
	// Det som er litt av problemet nå er at key blir random laget.
	
    function submitClick() {	

	// Sender svaret til firebase databasen under "Answer" childe
	var firebaseRef = firebase.database().ref().child("SvarTilStudent");

	var messageText = mainText.value;

	firebaseRef.push().set(messageText);
    mainText.value = "";
        
	}

	function gotData(data) {
		console.log(data);
	}

	function errData(err) {
		console.log('Error!');
		console.log(err);
	}
    
    
    
    //GT 
    
    
    
    var inboxArray = [];
    var messagesArray = [];
    
    var inbox = document.getElementById("Inbox");
    var messages = document.getElementById("messages");
    
    
    function showInbox(){
                
    var listInbox = inboxArray.length;

    for(var i = 0; i < listInbox; i++){
        var inboxElement = document.createElement("div");
        inboxElement.innerHTML = inboxArray[i];
        inboxElement.className = "boxLeft";
        inboxElement.onclick = showMessages;
        boxLeft.appendChild(inboxElement);
        }
    }/*end showInbox*/
    
    function showMessages(){
    
    var listMessages = messagesArray.length;

    for(var i = 0; i < listMessages; i++){
        var messageElement = document.createElement("div");
        inboxElement.innerHTML = messagesArray[i];
        inboxElement.className = "boxRight";
        boxLeft.appendChild(messageElement);
        }
        

    }/*end showMessages*/
    
</script>
</body>
</html>